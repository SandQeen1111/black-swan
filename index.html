<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Swan â€” Deutsche Programmiersprache</title>
<meta name="description" content="Black Swan: Die erste vollstÃ¤ndige deutsche Programmiersprache mit IDE.">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¦¢</text></svg>">
<style>
  html, body, #root { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #050508; }
  #error { color: #f43f5e; font-family: monospace; padding: 20px; white-space: pre-wrap; }
</style>
</head>
<body>
<div id="root"></div>
<div id="error"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

<script type="text/babel" data-presets="react">
const { useState, useEffect, useCallback, useRef } = React;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  B L A C K  S W A N  â€” MEGABUILD
//  ğŸ¢ SchildkrÃ¶te Â· ğŸ”„ Animation Â· ğŸ–± Maus Â· ğŸ”Š Sound Â· ğŸ¤– KI Â· ğŸ¤ Voice
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const KW={wenn:"if",sonst_wenn:"elif",sonst:"else",solange:"while","fÃ¼r":"for",
abbrechen:"break",weiter:"continue",Ã¼bergeben:"pass",funktion:"def",
zurÃ¼ckgeben:"return",klasse:"class",selbst:"self",wahr:"True",falsch:"False",
und:"and",oder:"or",nicht:"not",ist:"is",nichts:"None",versuche:"try",
ausnahme:"except",schlieÃŸlich:"finally",importiere:"import",
von:"from",als:"as",mit:"with",anonym:"lambda","in":"in"};
const BF={drucke:"print",bereich:"range",lÃ¤nge:"len",ganzzahl:"int",
dezimal:"float",zeichenkette:"str",liste:"list",abs_wert:"abs",
runden:"round",sortiert:"sorted",minimum:"min",maximum:"max",summe:"sum"};
const ALL={...KW,...BF};
const MT={".anhÃ¤ngen(":".append(",".herausholen(":".pop(",".sortieren(":".sort(",
".umkehren(":".reverse(",".ersetzen(":".replace(",".teilen(":".split("};

function protect(c){const s=[];const r=c.replace(/("""[\s\S]*?"""|'''[\s\S]*?'''|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|#.*$)/gm,
m=>{s.push(m);return`\x00${s.length-1}\x00`});return{safe:r,strings:s}}
function restore(c,s){return c.replace(/\x00(\d+)\x00/g,(_,i)=>s[+i])}
const WB_S="(?<![a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ_0-9])",WB_E="(?![a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ_0-9])";
function deToEn(code){let{safe,strings}=protect(code);
for(const k of Object.keys(MT).sort((a,b)=>b.length-a.length))safe=safe.split(k).join(MT[k]);
for(const k of Object.keys(ALL).sort((a,b)=>b.length-a.length)){
const e=k.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
safe=safe.replace(new RegExp(`${WB_S}${e}${WB_E}`,"g"),ALL[k])}
return restore(safe,strings)}

// â”€â”€ EXECUTION ENGINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function compileGerman(code){
let js="";
const parsed=[];
for(const raw of code.split("\n")){const t=raw.trim();
if(!t||t.startsWith("#"))continue;
parsed.push({indent:Math.max(0,raw.search(/\S/)),text:t})}
const bs=[];
for(let i=0;i<parsed.length;i++){
const{indent,text}=parsed[i];
const isCont=/^(sonst_wenn\s|sonst:|ausnahme|schlieÃŸlich:)/.test(text);
if(!isCont){while(bs.length>0&&indent<=bs[bs.length-1]){bs.pop();js+="}\n"}}
else{while(bs.length>0&&indent<bs[bs.length-1]){bs.pop();js+="}\n"}
if(bs.length>0&&indent<=bs[bs.length-1])bs.pop()}
const line=tLine(text);
if(text.endsWith(":")){js+=line+"\n";bs.push(indent)}else{js+=line+";\n"}}
while(bs.length>0){bs.pop();js+="}\n"}
return js}

function tLine(t){let l=t;
if(/^drucke\(/.test(l))return"__out.push("+tEx(l.slice(7,-1))+")";let m;
if((m=l.match(/^fÃ¼r\s+([\wÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ]+)\s+in\s+(.+):$/)))return"for(let "+m[1]+" of "+tEx(m[2])+"){";
if((m=l.match(/^solange\s+(.+):$/)))return"while("+tEx(m[1])+"){";
if((m=l.match(/^wenn\s+(.+):$/)))return"if("+tEx(m[1])+"){";
if((m=l.match(/^sonst_wenn\s+(.+):$/)))return"} else if("+tEx(m[1])+"){";
if(l==="sonst:")return"} else {";
if((m=l.match(/^funktion\s+([\wÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ]+)\((.*)\):$/)))
return"function "+m[1]+"("+m[2].replace(/selbst,?\s*/,"")+"){";
if((m=l.match(/^zurÃ¼ckgeben\s+(.+)$/)))return"return "+tEx(m[1]);
if(l==="versuche:")return"try{";if(/^ausnahme/.test(l))return"}catch(__e){";
if(l==="abbrechen")return"break";if(l==="weiter")return"continue";
return tEx(l)}
function tEx(e){return e.replace(/\bwahr\b/g,"true").replace(/\bfalsch\b/g,"false")
.replace(/\bnichts\b/g,"null").replace(/\bund\b/g,"&&").replace(/\boder\b/g,"||")
.replace(/\bnicht\s+/g,"!").replace(/\.anhÃ¤ngen\(/g,".push(")
.replace(/\.herausholen\(/g,".pop(").replace(/\bliste\(\)/g,"[]")}
function tErr(m){return m?m.replace(/is not defined/g,"ist nicht definiert")
.replace(/is not a function/g,"ist keine Funktion")
.replace(/SyntaxError/g,"Syntaxfehler").replace(/TypeError/g,"Typfehler"):m}

// â”€â”€ RUNTIME LIBRARY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const RUNTIME = `
function bereich(...a){let s=0,e,st=1;if(a.length===1)e=a[0];else if(a.length===2){s=a[0];e=a[1]}else{s=a[0];e=a[1];st=a[2]};const r=[];for(let i=s;st>0?i<e:i>e;i+=st)r.push(i);return r}
function lÃ¤nge(x){return x.length!=null?x.length:Object.keys(x).length}
function ganzzahl(x){return parseInt(x)}
function dezimal(x){return parseFloat(x)}
function zeichenkette(x){if(Array.isArray(x))return"["+x.join(", ")+"]";return String(x)}
function summe(a){return a.reduce((s,x)=>s+x,0)}
function minimum(...a){return Math.min(...(a.length===1&&Array.isArray(a[0])?a[0]:a))}
function maximum(...a){return Math.max(...(a.length===1&&Array.isArray(a[0])?a[0]:a))}
function abs_wert(x){return Math.abs(x)}
function runden(x,d){return d!==undefined?+x.toFixed(d):Math.round(x)}
function zufall(a,b){return Math.floor(Math.random()*(b-a+1))+a}
function zufall_dezimal(){return Math.random()}
function sinus(x){return Math.sin(x)}
function kosinus(x){return Math.cos(x)}
function wurzel(x){return Math.sqrt(x)}
function potenz(x,n){return Math.pow(x,n)}
const PI=Math.PI;
function zeichne_kreis(x,y,r,c){__d.push({t:"c",x,y,r,c:c||"#fff"})}
function zeichne_linie(x1,y1,x2,y2,c,w){__d.push({t:"l",x1,y1,x2,y2,c:c||"#fff",w:w||2})}
function zeichne_rechteck(x,y,w,h,c){__d.push({t:"r",x,y,w,h,c:c||"#fff"})}
function zeichne_text(x,y,txt,c,s){__d.push({t:"tx",x,y,txt:String(txt),c:c||"#fff",s:s||16})}
function fÃ¼lle(c){__d.push({t:"f",c})}
`;

// â”€â”€ TURTLE CLASS (runtime) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TURTLE_RT = `
const __turtle={x:200,y:200,a:-90,c:"#f43f5e",w:2,pen:true,vis:true};
const schildkrÃ¶te={
  vorwÃ¤rts(d){const r=__turtle.a*Math.PI/180;const nx=__turtle.x+d*Math.cos(r);const ny=__turtle.y+d*Math.sin(r);
    if(__turtle.pen)__d.push({t:"l",x1:__turtle.x,y1:__turtle.y,x2:nx,y2:ny,c:__turtle.c,w:__turtle.w});
    __turtle.x=nx;__turtle.y=ny},
  rÃ¼ckwÃ¤rts(d){schildkrÃ¶te.vorwÃ¤rts(-d)},
  links(w){__turtle.a-=w},
  rechts(w){__turtle.a+=w},
  farbe(f){__turtle.c=f},
  breite(b){__turtle.w=b},
  stift_hoch(){__turtle.pen=false},
  stift_runter(){__turtle.pen=true},
  gehe_zu(x,y){if(__turtle.pen)__d.push({t:"l",x1:__turtle.x,y1:__turtle.y,x2:x,y2:y,c:__turtle.c,w:__turtle.w});
    __turtle.x=x;__turtle.y=y},
  kreis(r){__d.push({t:"c",x:__turtle.x,y:__turtle.y,r,c:__turtle.c,w:__turtle.w})},
  verstecken(){__turtle.vis=false},
  zeigen(){__turtle.vis=true},
  position(){return[__turtle.x,__turtle.y]},
};
`;

// â”€â”€ SOUND RUNTIME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SOUND_RT = `
function spiele_ton(freq,dauer,typ){
  if(typeof __audioCtx==='undefined')return;
  try{const o=__audioCtx.createOscillator();const g=__audioCtx.createGain();
  o.type=typ||'sine';o.frequency.value=freq;g.gain.value=0.15;
  o.connect(g);g.connect(__audioCtx.destination);o.start();
  g.gain.exponentialRampToValueAtTime(0.001,__audioCtx.currentTime+(dauer||0.3));
  o.stop(__audioCtx.currentTime+(dauer||0.3));}catch(e){}}
const NOTEN={C3:131,D3:147,E3:165,F3:175,G3:196,A3:220,B3:247,
  C4:262,D4:294,E4:330,F4:349,G4:392,A4:440,B4:494,
  C5:523,D5:587,E5:659,F5:698,G5:784,A5:880,B5:988};
function spiele_note(note,dauer){spiele_ton(NOTEN[note]||440,dauer)}
`;

// â”€â”€ HIGHLIGHTING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function hlDE(code){return code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
.replace(/(#.*?)$/gm,'<em style="color:#4a4a6a">$1</em>')
.replace(/("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')/g,'<b style="color:#2dd4bf">$1</b>')
.replace(/\b(\d+\.?\d*)\b/g,'<b style="color:#facc15">$1</b>')
.replace(/(?<![a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ_])(wenn|sonst_wenn|sonst|solange|fÃ¼r|abbrechen|weiter|funktion|zurÃ¼ckgeben|klasse|selbst|wahr|falsch|und|oder|nicht|nichts|versuche|ausnahme|in)(?![a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ_])/g,
'<b style="color:#f43f5e">$1</b>')
.replace(/(?<![a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ_.])(drucke|bereich|lÃ¤nge|zeichenkette|ganzzahl|dezimal|liste|sortiert|minimum|maximum|summe|zufall|zufall_dezimal|sinus|kosinus|wurzel|potenz|zeichne_kreis|zeichne_linie|zeichne_rechteck|zeichne_text|fÃ¼lle|spiele_ton|spiele_note|schildkrÃ¶te)(?=[.(])/g,
'<b style="color:#38bdf8">$1</b>')}

// â”€â”€ SPEECH TO CODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function speechToCode(raw){let t=raw.trim();
const kws=["drucke","wenn","sonst","solange","fÃ¼r","funktion","zurÃ¼ckgeben","wahr","falsch","und","oder","nicht","nichts","bereich","lÃ¤nge","zeichenkette","ganzzahl","liste","zeichne_kreis","zeichne_linie","zeichne_rechteck","fÃ¼lle","sinus","kosinus","zufall","schildkrÃ¶te","in","spiele_ton","spiele_note"];
for(const k of kws)t=t.replace(new RegExp("\\b"+k+"\\b","gi"),k);
const nums=[["null","0"],["eins","1"],["zwei","2"],["drei","3"],["vier","4"],["fÃ¼nf","5"],["sechs","6"],["sieben","7"],["acht","8"],["neun","9"],["zehn","10"],["hundert","100"],["tausend","1000"]];
for(const[w,d]of nums)t=t.replace(new RegExp(`\\b${w}\\b`,"gi"),d);
t=t.replace(/(\d+)\s+bis\s+(\d+)/g,"$1, $2");
t=t.replace(/\bgleich gleich\b/gi,"==");t=t.replace(/\bgrÃ¶ÃŸer gleich\b/gi,">=");
t=t.replace(/\bkleiner gleich\b/gi,"<=");t=t.replace(/\bgrÃ¶ÃŸer\b/gi,">");
t=t.replace(/\bkleiner\b/gi,"<");t=t.replace(/\bist gleich\b/gi,"=");
t=t.replace(/\bgleich\b/gi,"=");t=t.replace(/\bplus\b/gi,"+");
t=t.replace(/\bminus\b/gi,"-");t=t.replace(/\bgeteilt durch\b/gi,"/");
t=t.replace(/(\w)\s+mal\s+(\w)/gi,"$1 * $2");
t=t.replace(/\s*doppelpunkt\s*$/gi,":");t=t.replace(/\bdoppelpunkt\b/gi,":");
t=t.replace(/\bklammer auf\b/gi,"(");t=t.replace(/\bklammer zu\b/gi,")");
t=t.replace(/\bkomma\b/gi,",");
t=t.replace(/^drucke\s+(?!\()(.+?)$/gm,(_,a)=>/[+\-*/=<>]|zeichenkette|lÃ¤nge/.test(a)?`drucke(${a})`:`drucke("${a}")`);
t=t.replace(/bereich\s+(\d+)\s*,\s*(\d+)/g,"bereich($1, $2)");
if(/^(fÃ¼r\s+\w+\s+in|wenn\s|solange\s|funktion\s)/.test(t)&&!t.endsWith(":"))t+=":";
if(/^sonst$/i.test(t.trim()))t="sonst:";
return t.replace(/\s+/g," ").replace(/\(\s+/g,"(").replace(/\s+\)/g,")").replace(/,\s*/g,", ").trim()}

// â”€â”€ AI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const AI_SYS=`Du bist Black Swan. Generiere NUR Code, KEIN Markdown/Backticks/Text.
Keywords: wenn, sonst, sonst_wenn, fÃ¼r, solange, funktion, zurÃ¼ckgeben, wahr, falsch, und, oder, nicht
Funktionen: drucke(), bereich(), lÃ¤nge(), zeichenkette(), ganzzahl(), zufall(min,max), sinus(), kosinus(), PI
Canvas: zeichne_kreis(x,y,r,farbe), zeichne_linie(x1,y1,x2,y2,farbe,breite), zeichne_rechteck(x,y,b,h,farbe), zeichne_text(x,y,text,farbe), fÃ¼lle(farbe)
SchildkrÃ¶te: schildkrÃ¶te.vorwÃ¤rts(d), schildkrÃ¶te.links(w), schildkrÃ¶te.rechts(w), schildkrÃ¶te.farbe(f), schildkrÃ¶te.breite(b), schildkrÃ¶te.kreis(r), schildkrÃ¶te.stift_hoch(), schildkrÃ¶te.stift_runter()
Animation: Definiere funktion zeichne(): fÃ¼r 60fps Loop. Nutze rahmen, maus_x, maus_y, maus_gedrÃ¼ckt
Sound: spiele_ton(frequenz, dauer), spiele_note("C4", dauer)
Alles auf Deutsch. Keine englischen WÃ¶rter.`;

// â”€â”€ EXAMPLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const GALLERY=[
{t:"ğŸ¢ Stern",c:`# SchildkrÃ¶te zeichnet einen Stern
schildkrÃ¶te.farbe("#facc15")
schildkrÃ¶te.breite(3)

fÃ¼r i in bereich(0, 5):
    schildkrÃ¶te.vorwÃ¤rts(150)
    schildkrÃ¶te.rechts(144)`},
{t:"ğŸŒ€ Spirale",c:`# Spirale mit zunehmender LÃ¤nge
schildkrÃ¶te.breite(2)

fÃ¼r i in bereich(0, 150):
    farbe = "hsl(" + zeichenkette(i * 2.4) + ",80%,60%)"
    schildkrÃ¶te.farbe(farbe)
    schildkrÃ¶te.vorwÃ¤rts(i * 1.5)
    schildkrÃ¶te.rechts(91)`},
{t:"â„ï¸ Schneeflocke",c:`# Koch-Schneeflocke
funktion koch(lÃ¤nge, tiefe):
    wenn tiefe == 0:
        schildkrÃ¶te.vorwÃ¤rts(lÃ¤nge)
        zurÃ¼ckgeben nichts
    koch(lÃ¤nge / 3, tiefe - 1)
    schildkrÃ¶te.links(60)
    koch(lÃ¤nge / 3, tiefe - 1)
    schildkrÃ¶te.rechts(120)
    koch(lÃ¤nge / 3, tiefe - 1)
    schildkrÃ¶te.links(60)
    koch(lÃ¤nge / 3, tiefe - 1)

schildkrÃ¶te.farbe("#38bdf8")
schildkrÃ¶te.breite(1)
schildkrÃ¶te.gehe_zu(80, 300)

fÃ¼r i in bereich(0, 3):
    koch(250, 4)
    schildkrÃ¶te.rechts(120)`},
{t:"ğŸŒ¸ Blume",c:`# Blume aus KreisbÃ¶gen
fÃ¼r blatt in bereich(0, 12):
    farbe = "hsl(" + zeichenkette(blatt * 30) + ",75%,55%)"
    schildkrÃ¶te.farbe(farbe)
    schildkrÃ¶te.breite(2)
    fÃ¼r i in bereich(0, 30):
        schildkrÃ¶te.vorwÃ¤rts(8)
        schildkrÃ¶te.rechts(12)
    schildkrÃ¶te.rechts(30)

schildkrÃ¶te.farbe("#facc15")
schildkrÃ¶te.gehe_zu(200, 200)
schildkrÃ¶te.kreis(15)`},
{t:"â­ Mandala",c:`# Symmetrisches Mandala
fÃ¼r ring in bereich(1, 9):
    fÃ¼r i in bereich(0, ring * 6):
        winkel = i * 2 * PI / (ring * 6)
        r = ring * 24
        x = 200 + r * kosinus(winkel)
        y = 200 + r * sinus(winkel)
        zeichne_kreis(x, y, 5 + ring, "hsl(" + zeichenkette(ring * 40) + ",80%,60%)")`},
{t:"ğŸŒŠ Ozean",c:`# Sinuswellen-Animation
fÃ¼r w in bereich(0, 15):
    fÃ¼r x in bereich(0, 400):
        phase = w * 0.6
        amp = 12 + w * 3
        y = 30 + w * 26 + amp * sinus(x * 0.025 + phase)
        b = 80 + w * 11
        zeichne_kreis(x, y, 1.5, "rgb(20," + zeichenkette(b) + ",210)")`},
{t:"ğŸ”¥ Feuerwerk",c:`# Partikel-Explosionen
fÃ¼r burst in bereich(0, 10):
    cx = 40 + zufall(0, 320)
    cy = 40 + zufall(0, 320)
    fÃ¼r i in bereich(0, 50):
        winkel = zufall_dezimal() * 2 * PI
        kraft = zufall_dezimal() * 70 + 10
        x = cx + kraft * kosinus(winkel)
        y = cy + kraft * sinus(winkel)
        r = 200 + zufall(0, 55)
        g = zufall(0, 200)
        zeichne_kreis(x, y, 2 + zufall_dezimal() * 2, "rgb(" + zeichenkette(r) + "," + zeichenkette(g) + ",40)")`},
{t:"ğŸ® Mausjagd",c:`# INTERAKTIV: Bewege die Maus Ã¼ber den Canvas!
funktion zeichne():
    fÃ¼lle("#0a0a14")
    # Kreis folgt der Maus
    zeichne_kreis(maus_x, maus_y, 20, "#f43f5e")
    zeichne_kreis(maus_x, maus_y, 35, "rgba(244,63,94,0.2)")
    zeichne_kreis(maus_x, maus_y, 50, "rgba(244,63,94,0.1)")
    # Fadenkreuz
    zeichne_linie(maus_x - 40, maus_y, maus_x + 40, maus_y, "#ffffff20", 1)
    zeichne_linie(maus_x, maus_y - 40, maus_x, maus_y + 40, "#ffffff20", 1)
    # Koordinaten
    zeichne_text(10, 20, "X: " + zeichenkette(ganzzahl(maus_x)), "#666", 12)
    zeichne_text(10, 38, "Y: " + zeichenkette(ganzzahl(maus_y)), "#666", 12)
    zeichne_text(10, 56, "Frame: " + zeichenkette(rahmen), "#444", 12)`},
{t:"ğŸ¨ Malen",c:`# INTERAKTIV: Klicke und male auf dem Canvas!
punkte = liste()

funktion zeichne():
    wenn maus_gedrÃ¼ckt:
        punkte.anhÃ¤ngen([maus_x, maus_y, rahmen])
    fÃ¼r p in punkte:
        farbe = "hsl(" + zeichenkette(p[2] * 3) + ",80%,60%)"
        zeichne_kreis(p[0], p[1], 5, farbe)
    zeichne_text(10, 20, "Punkte: " + zeichenkette(lÃ¤nge(punkte)), "#666", 12)
    wenn lÃ¤nge(punkte) == 0:
        zeichne_text(130, 200, "Klicke zum Malen!", "#333", 18)`},
{t:"ğŸª Orbit",c:`# ANIMATION: Planeten umkreisen die Sonne
funktion zeichne():
    fÃ¼lle("#050510")
    # Sterne
    fÃ¼r i in bereich(0, 30):
        sx = (i * 137 + rahmen) % 400
        sy = (i * 89) % 400
        zeichne_kreis(sx, sy, 1, "#ffffff30")
    # Sonne
    zeichne_kreis(200, 200, 25, "#facc15")
    zeichne_kreis(200, 200, 30, "rgba(250,204,21,0.15)")
    # Planeten
    fÃ¼r p in bereich(0, 5):
        abstand = 60 + p * 35
        tempo = 0.02 - p * 0.003
        winkel = rahmen * tempo + p * 1.2
        x = 200 + abstand * kosinus(winkel)
        y = 200 + abstand * sinus(winkel)
        farbe = "hsl(" + zeichenkette(p * 60 + 180) + ",70%,55%)"
        zeichne_kreis(x, y, 6 + p * 2, farbe)`},
{t:"ğŸµ Musik",c:`# Spiele eine Melodie â€” klicke AusfÃ¼hren!
# (Sound funktioniert nur mit AusfÃ¼hren-Button)

melodie = ["C4", "E4", "G4", "C5", "G4", "E4", "C4", "D4", "F4", "A4", "D5", "A4", "F4", "D4"]

fÃ¼r i in bereich(0, lÃ¤nge(melodie)):
    note = melodie[i]
    spiele_note(note, 0.3)
    drucke("â™ª " + note)
    # Visualisierung
    x = 30 + i * 25
    h = 50 + zufall(20, 100)
    farbe = "hsl(" + zeichenkette(i * 25) + ",75%,55%)"
    zeichne_rechteck(x, 400 - h, 18, h, farbe)`},
{t:"ğŸ”¢ FizzBuzz",c:`fÃ¼r i in bereich(1, 31):
    wenn i % 15 == 0:
        drucke("FizzBuzz")
    sonst_wenn i % 3 == 0:
        drucke("Fizz")
    sonst_wenn i % 5 == 0:
        drucke("Buzz")
    sonst:
        drucke(zeichenkette(i))`},
{t:"ğŸ§¬ DNA",c:`# Doppelhelix-Struktur
fÃ¼r i in bereich(0, 200):
    y = i * 2
    x1 = 200 + 60 * sinus(i * 0.08)
    x2 = 200 - 60 * sinus(i * 0.08)
    zeichne_kreis(x1, y, 4, "#f43f5e")
    zeichne_kreis(x2, y, 4, "#38bdf8")
    wenn i % 8 == 0:
        zeichne_linie(x1, y, x2, y, "#ffffff15", 1)`},
];

// â”€â”€ COLORS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const C={R:"#f43f5e",B:"#38bdf8",T:"#2dd4bf",Y:"#facc15",P:"#a78bfa",O:"#fb923c",
  BG:"#050508",S1:"#0a0a12",S2:"#0f0f1a",BD:"#1a1a2e",TX:"#e2e2f0",DM:"#4a4a6a"};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function BlackSwan() {
  const [code, setCode] = useState(GALLERY[0].c);
  const [activeG, setActiveG] = useState(0);
  const [consoleOut, setConsoleOut] = useState([]);
  const [isAnim, setIsAnim] = useState(false);
  const canvasRef = useRef(null);
  const consoleRef = useRef(null);
  const animRef = useRef(null);
  const mouseRef = useRef({x:200,y:200,down:false});
  const audioRef = useRef(null);
  const stateRef = useRef(null);

  // Overlays
  const [showVoice, setShowVoice] = useState(false);
  const [showAI, setShowAI] = useState(false);
  const [showPy, setShowPy] = useState(false);
  const [listening, setListening] = useState(false);
  const [transcript, setTranscript] = useState("");
  const [interim, setInterim] = useState("");
  const [aiInput, setAiInput] = useState("");
  const [aiLoading, setAiLoading] = useState(false);
  const [voiceOK, setVoiceOK] = useState(false);
  const recRef = useRef(null);
  const waveRef = useRef(null);
  const analyserRef = useRef(null);
  const waveAnimRef = useRef(null);

  // Voice init
  useEffect(() => {
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SR) return;
    setVoiceOK(true);
    const r = new SR(); r.lang="de-DE"; r.continuous=true; r.interimResults=true;
    r.onresult = ev => {
      let fin="",intr="";
      for(let i=ev.resultIndex;i<ev.results.length;i++){
        if(ev.results[i].isFinal)fin+=ev.results[i][0].transcript;
        else intr+=ev.results[i][0].transcript;}
      setInterim(intr);
      if(fin)setTranscript(p=>p+(p?" ":"")+fin);
    };
    r.onerror=()=>{};
    r.onend=()=>setListening(false);
    recRef.current=r;
  }, []);

  // Canvas mouse
  useEffect(() => {
    const cv = canvasRef.current;
    if (!cv) return;
    const rect = () => cv.getBoundingClientRect();
    const onMove = e => {
      const r = rect();
      mouseRef.current.x = ((e.clientX - r.left) / r.width) * 400;
      mouseRef.current.y = ((e.clientY - r.top) / r.height) * 400;
    };
    const onDown = () => { mouseRef.current.down = true; };
    const onUp = () => { mouseRef.current.down = false; };
    cv.addEventListener("mousemove", onMove);
    cv.addEventListener("mousedown", onDown);
    window.addEventListener("mouseup", onUp);
    return () => { cv.removeEventListener("mousemove", onMove);
      cv.removeEventListener("mousedown", onDown);
      window.removeEventListener("mouseup", onUp); };
  }, []);

  // â”€â”€ RENDER CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const renderCanvas = useCallback((draws, turtle) => {
    const cv = canvasRef.current;
    if (!cv) return;
    const ctx = cv.getContext("2d");
    ctx.clearRect(0, 0, 400, 400);
    ctx.fillStyle = "#08080f";
    ctx.fillRect(0, 0, 400, 400);
    // Grid
    ctx.strokeStyle = "#ffffff06";
    ctx.lineWidth = 0.5;
    for (let x = 0; x < 400; x += 40) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, 400); ctx.stroke(); }
    for (let y = 0; y < 400; y += 40) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(400, y); ctx.stroke(); }
    // Draw commands
    for (const d of draws) {
      if (d.t === "f") { ctx.fillStyle = d.c; ctx.fillRect(0, 0, 400, 400); continue; }
      ctx.fillStyle = d.c || "#fff"; ctx.strokeStyle = d.c || "#fff";
      if (d.t === "c") { ctx.beginPath(); ctx.arc(d.x, d.y, Math.max(0.5, d.r), 0, Math.PI * 2); ctx.fill(); }
      else if (d.t === "l") { ctx.lineWidth = d.w || 2; ctx.beginPath(); ctx.moveTo(d.x1, d.y1); ctx.lineTo(d.x2, d.y2); ctx.stroke(); }
      else if (d.t === "r") { ctx.fillRect(d.x, d.y, d.w, d.h); }
      else if (d.t === "tx") { ctx.font = `${d.s || 16}px 'Outfit',sans-serif`; ctx.fillText(d.txt, d.x, d.y); }
    }
    // Turtle indicator
    if (turtle && turtle.vis) {
      const tx = turtle.x, ty = turtle.y, ta = turtle.a * Math.PI / 180;
      ctx.save();
      ctx.translate(tx, ty); ctx.rotate(ta);
      ctx.beginPath(); ctx.moveTo(10, 0); ctx.lineTo(-6, -6); ctx.lineTo(-3, 0); ctx.lineTo(-6, 6); ctx.closePath();
      ctx.fillStyle = "#f43f5ecc"; ctx.fill();
      ctx.strokeStyle = "#fff"; ctx.lineWidth = 1; ctx.stroke();
      ctx.restore();
    }
  }, []);

  // â”€â”€ STOP ANIMATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const stopAnim = useCallback(() => {
    if (animRef.current) { cancelAnimationFrame(animRef.current); animRef.current = null; }
    stateRef.current = null;
    setIsAnim(false);
  }, []);

  // â”€â”€ RUN CODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const runCode = useCallback(() => {
    stopAnim();
    const js = compileGerman(code);
    const output = [], errors = [], draws = [];

    // Init audio
    if (!audioRef.current) {
      try { audioRef.current = new (window.AudioContext || window.webkitAudioContext)(); } catch(e) {}
    }

    try {
      // Check if code has animation function (zeichne)
      const hasAnim = /^funktion zeichne\(\)\s*:/m.test(code);

      const fullCode = `${RUNTIME}\n${TURTLE_RT}\n${SOUND_RT}\n${js}\nreturn {zeichneFn: typeof zeichne==='function'?zeichne:null, turtle:__turtle, state: typeof __state!=='undefined'?__state:null};`;
      const fn = new Function("__out", "__err", "__d", "__audioCtx", "rahmen", "maus_x", "maus_y", "maus_gedrÃ¼ckt", fullCode);
      const result = fn(output, errors, draws, audioRef.current, 0,
        mouseRef.current.x, mouseRef.current.y, mouseRef.current.down);

      if (result.zeichneFn && !errors.length) {
        // Animation mode!
        setIsAnim(true);
        let frame = 0;
        // We need to re-run the SETUP code once to create closures, then call zeichne repeatedly
        // Better approach: create a persistent scope
        const setupCode = `${RUNTIME}\n${TURTLE_RT}\n${SOUND_RT}\n${js}\nreturn {zeichne: typeof zeichne==='function'?zeichne:null, turtle:__turtle, getDraws:()=>{const r=[...__d];__d.length=0;return r}};`;
        const setupFn = new Function("__out", "__err", "__d", "__audioCtx", "rahmen", "maus_x", "maus_y", "maus_gedrÃ¼ckt", setupCode);
        // We need mutable scope... use object
        const scope = {out:[],err:[],d:[],frame:0};
        const scopedCode = `${RUNTIME}\n${TURTLE_RT}\n${SOUND_RT}\n
let rahmen=0,maus_x=0,maus_y=0,maus_gedrÃ¼ckt=false;
${js}
return{zeichne:typeof zeichne==='function'?zeichne:null,
  setMouse(x,y,d){maus_x=x;maus_y=y;maus_gedrÃ¼ckt=d},
  setFrame(f){rahmen=f},
  getDraws(){const r=[...__d];__d.length=0;return r},
  getTurtle(){return __turtle}};`;
        const scopedFn = new Function("__out","__err","__d","__audioCtx", scopedCode);
        const ctx = scopedFn(scope.out, scope.err, scope.d, audioRef.current);

        if (ctx.zeichne) {
          const animate = () => {
            scope.out.length = 0;
            ctx.setMouse(mouseRef.current.x, mouseRef.current.y, mouseRef.current.down);
            ctx.setFrame(frame);
            try { ctx.zeichne(); } catch(e) { setConsoleOut([{ty:"err",t:"âš  "+tErr(e.message)}]); stopAnim(); return; }
            const dr = ctx.getDraws();
            renderCanvas(dr, ctx.getTurtle());
            frame++;
            animRef.current = requestAnimationFrame(animate);
          };
          animRef.current = requestAnimationFrame(animate);
          setConsoleOut([{ty:"sys",t:"ğŸ”„ Animation lÃ¤uft... ("+code.split("\n").length+" Zeilen)"}]);
        }
      } else {
        // Static render
        const lines = output.map(o=>({ty:"out",t:String(o)}));
        errors.forEach(e=>lines.push({ty:"err",t:"âš  "+tErr(e)}));
        if (!lines.length) lines.push({ty:"sys",t:"âœ“ "+draws.length+" Zeichenbefehle"});
        setConsoleOut(lines);
        renderCanvas(draws, result.turtle);
      }
    } catch(e) {
      setConsoleOut([{ty:"err",t:"âš  "+tErr(e.message)}]);
      renderCanvas([], null);
    }
  }, [code, stopAnim, renderCanvas]);

  // Run on code change (only for non-animation code)
  useEffect(() => {
    if (/^funktion zeichne\(\)\s*:/m.test(code)) {
      // Don't auto-run animations
      setConsoleOut([{ty:"sys",t:"ğŸ”„ Animation erkannt â€” drÃ¼cke â–¶ AusfÃ¼hren"}]);
      return;
    }
    stopAnim();
    runCode();
  }, [code]);

  useEffect(() => {
    if (consoleRef.current) consoleRef.current.scrollTop = consoleRef.current.scrollHeight;
  }, [consoleOut]);

  useEffect(() => {
    const h = e => { if((e.ctrlKey||e.metaKey)&&e.key==="Enter"){e.preventDefault();runCode()}};
    window.addEventListener("keydown",h); return()=>window.removeEventListener("keydown",h);
  }, [runCode]);

  // â”€â”€ VOICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const startVoice = async () => {
    setTranscript(""); setInterim("");
    try { recRef.current?.start(); setListening(true); } catch(e) {}
    try {
      const stream = await navigator.mediaDevices.getUserMedia({audio:true});
      const actx = new (window.AudioContext||window.webkitAudioContext)();
      const src = actx.createMediaStreamSource(stream);
      const an = actx.createAnalyser(); an.fftSize = 256;
      src.connect(an); analyserRef.current = an;
      const cv = waveRef.current; if(!cv)return;
      const ctx = cv.getContext("2d"); const W=cv.width, H=cv.height;
      const buf = new Uint8Array(an.frequencyBinCount);
      const draw = () => {
        waveAnimRef.current = requestAnimationFrame(draw);
        an.getByteFrequencyData(buf); ctx.clearRect(0,0,W,H);
        for(let i=0;i<64;i++){const v=buf[i]/255;const h=v*H*.9;
          ctx.fillStyle=`hsla(${v*30},85%,${50+v*20}%,${.5+v*.5})`;
          ctx.fillRect(i*(W/64)+1,H-h,W/64-2,h);}
      }; draw();
    } catch(e) {}
  };
  const stopVoice = () => {
    setListening(false);
    try{recRef.current?.stop()}catch(e){}
    if(waveAnimRef.current)cancelAnimationFrame(waveAnimRef.current);
  };

  // â”€â”€ AI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const sendToAI = async (prompt) => {
    if(!prompt.trim()||aiLoading)return;
    setAiLoading(true); setAiInput("");
    try{
      const resp=await fetch("https://api.anthropic.com/v1/messages",{
        method:"POST",headers:{"Content-Type":"application/json"},
        body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1200,
          system:AI_SYS,messages:[{role:"user",content:prompt}]})});
      const data=await resp.json();
      const text=data.content?.map(c=>c.text||"").join("\n").trim()||"";
      const clean=text.replace(/^```[\w]*\n?/,"").replace(/\n?```$/,"").trim();
      if(clean){setCode(clean);setShowAI(false);}
    }catch(e){}
    setAiLoading(false);
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  return (
    <div style={{height:"100vh",display:"flex",flexDirection:"column",background:C.BG,
      color:C.TX,fontFamily:"'Fira Code',monospace",overflow:"hidden"}}>
      <style>{`
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800;900&family=Fira+Code:wght@400;500&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:${C.BD};border-radius:3px}
textarea:focus,input:focus{outline:none}
::selection{background:${C.R}30}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes breathe{0%,100%{box-shadow:0 0 0 0 ${C.R}40}50%{box-shadow:0 0 30px 6px ${C.R}15}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
      `}</style>

      {/* HEADER */}
      <div style={{display:"flex",alignItems:"center",justifyContent:"space-between",
        padding:"0 16px",height:42,flexShrink:0,borderBottom:`1px solid ${C.BD}50`,
        background:`linear-gradient(180deg,${C.S2}ee,${C.BG})`}}>
        <div style={{display:"flex",alignItems:"center",gap:12}}>
          <div style={{fontFamily:"'Outfit'",fontWeight:900,fontSize:15,display:"flex",
            alignItems:"center",gap:6}}>
            <span style={{fontSize:18}}>ğŸ¦¢</span>
            <span style={{background:`linear-gradient(135deg,${C.R},${C.O})`,
              WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}>BLACK SWAN</span>
          </div>
          <div style={{fontSize:9,color:C.DM,fontFamily:"'Outfit'"}}>Megabuild</div>
        </div>
        <div style={{display:"flex",gap:5}}>
          <button onClick={runCode} style={{padding:"4px 14px",borderRadius:16,border:"none",
            cursor:"pointer",background:isAnim?C.R:`linear-gradient(135deg,${C.T},${C.B})`,
            color:"#fff",fontFamily:"'Outfit'",fontSize:11,fontWeight:700}}>
            {isAnim?"â¹ Stopp":"â–¶ AusfÃ¼hren"}</button>
          {voiceOK&&<button onClick={()=>{setShowVoice(true);startVoice()}} style={{
            padding:"4px 14px",borderRadius:16,border:`1px solid ${C.O}30`,
            background:"transparent",color:C.O,cursor:"pointer",fontFamily:"'Outfit'",
            fontSize:11,fontWeight:600}}>ğŸ¤</button>}
          <button onClick={()=>setShowAI(true)} style={{padding:"4px 14px",borderRadius:16,
            border:`1px solid ${C.P}30`,background:"transparent",color:C.P,
            cursor:"pointer",fontFamily:"'Outfit'",fontSize:11,fontWeight:600}}>ğŸ¤– KI</button>
          <button onClick={()=>setShowPy(!showPy)} style={{padding:"4px 14px",borderRadius:16,
            border:`1px solid ${C.B}30`,background:showPy?C.B+"15":"transparent",
            color:C.B,cursor:"pointer",fontFamily:"'Outfit'",fontSize:11,fontWeight:600}}>ğŸ</button>
          <button onClick={()=>{const cv=canvasRef.current;if(!cv)return;const a=document.createElement("a");
            a.download="black-swan.png";a.href=cv.toDataURL();a.click()}} style={{
            padding:"4px 14px",borderRadius:16,border:`1px solid ${C.DM}30`,background:"transparent",
            color:C.DM,cursor:"pointer",fontFamily:"'Outfit'",fontSize:11,fontWeight:600}}>ğŸ’¾</button>
        </div>
      </div>

      {/* MAIN */}
      <div style={{flex:1,display:"flex",overflow:"hidden"}}>
        {/* Gallery */}
        <div style={{width:52,background:C.S1,borderRight:`1px solid ${C.BD}30`,
          display:"flex",flexDirection:"column",alignItems:"center",padding:"6px 0",
          gap:3,overflowY:"auto",flexShrink:0}}>
          {GALLERY.map((g,i)=>(
            <button key={i} onClick={()=>{setActiveG(i);stopAnim();setCode(g.c)}} title={g.t}
              style={{width:38,height:38,borderRadius:8,fontSize:15,
                border:`1px solid ${activeG===i?C.R+"50":C.BD+"30"}`,
                background:activeG===i?C.R+"15":C.S2,cursor:"pointer",
                display:"flex",alignItems:"center",justifyContent:"center"}}>{g.t.split(" ")[0]}</button>
          ))}
        </div>

        {/* Editor */}
        <div style={{width:showPy?320:400,display:"flex",flexDirection:"column",
          borderRight:`1px solid ${C.BD}30`,flexShrink:0,transition:"width .3s"}}>
          <div style={{flex:1,position:"relative",overflow:"hidden"}}>
            <pre style={{position:"absolute",inset:0,margin:0,padding:"10px 12px",fontSize:12,
              lineHeight:1.7,fontFamily:"inherit",overflow:"auto",pointerEvents:"none",
              whiteSpace:"pre-wrap",wordBreak:"break-all",background:"transparent",zIndex:1}}
              dangerouslySetInnerHTML={{__html:hlDE(code)}} />
            <textarea value={code} onChange={e=>{stopAnim();setCode(e.target.value)}}
              spellCheck={false} style={{position:"absolute",inset:0,width:"100%",height:"100%",
                padding:"10px 12px",fontSize:12,lineHeight:1.7,fontFamily:"inherit",
                background:C.BG,color:"transparent",caretColor:C.R,border:"none",
                resize:"none",whiteSpace:"pre-wrap",wordBreak:"break-all",zIndex:2}} />
          </div>
          <div style={{height:90,borderTop:`1px solid ${C.BD}30`,flexShrink:0}}>
            <div ref={consoleRef} style={{height:"100%",overflow:"auto",padding:"6px 12px",
              background:`${C.S1}80`,fontSize:10,lineHeight:1.5}}>
              {consoleOut.map((l,i)=>(
                <div key={i} style={{color:l.ty==="err"?C.R:l.ty==="sys"?C.DM:C.T,
                  animation:`fadeUp .12s ease ${i*.015}s both`}}>{l.t}</div>
              ))}
            </div>
          </div>
        </div>

        {/* Python */}
        {showPy&&(
          <div style={{width:280,borderRight:`1px solid ${C.BD}30`,flexShrink:0,
            animation:"fadeIn .2s ease"}}>
            <div style={{padding:"5px 10px",fontSize:8,letterSpacing:2,color:C.B,
              fontFamily:"'Outfit'",fontWeight:700,borderBottom:`1px solid ${C.BD}30`}}>
              ğŸ PYTHON</div>
            <pre style={{flex:1,margin:0,padding:"10px 12px",fontSize:11,lineHeight:1.7,
              fontFamily:"inherit",overflow:"auto",whiteSpace:"pre-wrap",
              background:C.BG,color:C.DM,height:"calc(100% - 28px)"}}>{deToEn(code)}</pre>
          </div>
        )}

        {/* CANVAS */}
        <div style={{flex:1,display:"flex",alignItems:"center",justifyContent:"center",
          background:`radial-gradient(ellipse at center,${C.S2},${C.BG})`,position:"relative"}}>
          <div style={{position:"absolute",inset:0,
            backgroundImage:`radial-gradient(circle at 1px 1px, ${C.BD}20 1px, transparent 0)`,
            backgroundSize:"40px 40px"}} />
          <canvas ref={canvasRef} width={400} height={400} style={{
            borderRadius:10,border:`1px solid ${C.BD}50`,cursor:"crosshair",
            boxShadow:`0 0 50px ${C.R}06, 0 20px 50px #00000030`,
            position:"relative",zIndex:1}} />
          {isAnim&&<div style={{position:"absolute",top:10,right:14,
            padding:"3px 10px",borderRadius:12,background:`${C.R}20`,
            border:`1px solid ${C.R}30`,fontSize:9,color:C.R,
            fontFamily:"'Outfit'",fontWeight:700,zIndex:2,
            animation:"breathe 2s ease infinite"}}>ğŸ”„ LIVE</div>}
        </div>
      </div>

      {/* VOICE OVERLAY */}
      {showVoice&&(
        <div style={{position:"absolute",inset:0,background:`${C.BG}f5`,
          backdropFilter:"blur(20px)",zIndex:100,display:"flex",flexDirection:"column",
          alignItems:"center",justifyContent:"center",gap:16,animation:"fadeIn .25s ease"}}>
          <button onClick={()=>{stopVoice();setShowVoice(false)}} style={{
            position:"absolute",top:14,right:14,width:32,height:32,borderRadius:"50%",
            border:`1px solid ${C.BD}`,background:C.S1,color:C.DM,cursor:"pointer",fontSize:14,
            display:"flex",alignItems:"center",justifyContent:"center"}}>âœ•</button>
          <div style={{fontFamily:"'Outfit'",fontSize:24,fontWeight:900,
            background:`linear-gradient(135deg,${C.R},${C.O})`,
            WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}>
            {listening?"Ich hÃ¶re zu...":"Sprechen"}</div>
          <canvas ref={waveRef} width={400} height={80} style={{borderRadius:10,border:`1px solid ${C.R}15`}} />
          {(transcript||interim)&&(
            <div style={{maxWidth:500,width:"100%",padding:"14px 18px",borderRadius:10,
              background:`${C.S1}cc`,border:`1px solid ${C.BD}`}}>
              <div style={{fontSize:14,fontFamily:"'Outfit'",lineHeight:1.5}}>
                {transcript&&<span>{transcript} </span>}
                {interim&&<span style={{color:C.DM,fontStyle:"italic"}}>{interim}</span>}
              </div>
              <div style={{marginTop:6,fontSize:11,color:C.O,fontFamily:"'Fira Code'"}}>
                â†’ {speechToCode(transcript||interim)}</div>
            </div>
          )}
          <div style={{display:"flex",gap:8}}>
            {listening
              ? <button onClick={stopVoice} style={{width:60,height:60,borderRadius:"50%",
                  border:"none",cursor:"pointer",background:C.R,color:"#fff",fontSize:20,
                  display:"flex",alignItems:"center",justifyContent:"center",
                  animation:"breathe 1.5s ease infinite"}}>â¹</button>
              : <button onClick={startVoice} style={{width:60,height:60,borderRadius:"50%",
                  border:`2px solid ${C.R}40`,cursor:"pointer",background:C.S1,color:C.R,
                  fontSize:20,display:"flex",alignItems:"center",justifyContent:"center"}}>ğŸ¤</button>}
          </div>
          {transcript&&(
            <div style={{display:"flex",gap:8}}>
              <button onClick={()=>{const c=speechToCode(transcript);setCode(p=>p+(p&&!p.endsWith("\n")?"\n":"")+c);
                stopVoice();setShowVoice(false)}} style={{padding:"8px 20px",borderRadius:8,
                border:"none",cursor:"pointer",background:`linear-gradient(135deg,${C.O},${C.R})`,
                color:"#fff",fontFamily:"'Outfit'",fontSize:12,fontWeight:700}}>âœï¸ Code einfÃ¼gen</button>
              <button onClick={()=>{sendToAI(transcript);stopVoice();setShowVoice(false)}}
                style={{padding:"8px 20px",borderRadius:8,border:"none",cursor:"pointer",
                  background:`linear-gradient(135deg,${C.P},${C.B})`,color:"#fff",
                  fontFamily:"'Outfit'",fontSize:12,fontWeight:700}}>ğŸ¤– An KI</button>
            </div>
          )}
        </div>
      )}

      {/* AI OVERLAY */}
      {showAI&&(
        <div style={{position:"absolute",inset:0,background:`${C.BG}f5`,
          backdropFilter:"blur(20px)",zIndex:100,display:"flex",flexDirection:"column",
          alignItems:"center",justifyContent:"center",gap:14,animation:"fadeIn .25s ease"}}>
          <button onClick={()=>setShowAI(false)} style={{
            position:"absolute",top:14,right:14,width:32,height:32,borderRadius:"50%",
            border:`1px solid ${C.BD}`,background:C.S1,color:C.DM,cursor:"pointer",fontSize:14,
            display:"flex",alignItems:"center",justifyContent:"center"}}>âœ•</button>
          <div style={{fontSize:36}}>ğŸ¦¢</div>
          <div style={{fontFamily:"'Outfit'",fontSize:22,fontWeight:900,
            background:`linear-gradient(135deg,${C.P},${C.B})`,
            WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}>
            Was soll ich erschaffen?</div>
          <div style={{display:"flex",flexWrap:"wrap",gap:5,justifyContent:"center",maxWidth:480}}>
            {["Zeichne eine Spiralgalaxie","SchildkrÃ¶te zeichnet ein Haus",
              "Interaktives Farbspiel mit Maus","Melodie mit Visualisierung",
              "Fraktalbaum mit Rekursion","Planetensystem Animation"].map(s=>(
              <button key={s} onClick={()=>{setAiInput(s);sendToAI(s)}} style={{
                padding:"5px 12px",borderRadius:8,border:`1px solid ${C.BD}`,
                background:C.S1,color:C.TX,cursor:"pointer",fontSize:11,
                fontFamily:"'Outfit'"}}>{s}</button>))}
          </div>
          <div style={{display:"flex",gap:6,width:"100%",maxWidth:480}}>
            <input value={aiInput} onChange={e=>setAiInput(e.target.value)}
              onKeyDown={e=>{if(e.key==="Enter")sendToAI(aiInput)}}
              placeholder="Beschreibe was du willst..."
              style={{flex:1,padding:"11px 14px",borderRadius:10,border:`1px solid ${C.BD}`,
                background:`${C.S1}cc`,color:C.TX,fontSize:13,fontFamily:"'Outfit'"}} />
            <button onClick={()=>sendToAI(aiInput)} disabled={aiLoading}
              style={{padding:"11px 20px",borderRadius:10,border:"none",cursor:"pointer",
                background:aiInput.trim()?`linear-gradient(135deg,${C.P},${C.B})`:C.S1,
                color:aiInput.trim()?"#fff":C.DM,fontFamily:"'Outfit'",fontSize:13,fontWeight:700}}>
              {aiLoading?<span style={{animation:"spin .8s linear infinite",display:"inline-block"}}>â³</span>:"â†’"}</button>
          </div>
        </div>
      )}

      {/* STATUS */}
      <div style={{height:20,display:"flex",alignItems:"center",justifyContent:"space-between",
        padding:"0 16px",borderTop:`1px solid ${C.BD}30`,background:`${C.S1}80`,
        fontSize:9,color:C.DM,flexShrink:0}}>
        <div style={{display:"flex",gap:8,fontFamily:"'Outfit'"}}>
          <span style={{fontWeight:600}}>BLACK SWAN</span>
          <span style={{color:isAnim?C.R:C.T}}>{isAnim?"â— Animation":"â— Live"}</span>
          {listening&&<span style={{color:C.O}}>â— Mikrofon</span>}
        </div>
        <span>ğŸ¢ SchildkrÃ¶te Â· ğŸ”„ Animation Â· ğŸ–± Maus Â· ğŸ”Š Sound Â· ğŸ¤– KI Â· ğŸ¤ Voice</span>
      </div>
    </div>
  );
}

// â”€â”€ RENDER â”€â”€
try {
  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(React.createElement(BlackSwan));
} catch(e) {
  document.getElementById('error').textContent = 'Error: ' + e.message + '\n' + e.stack;
}
</script>
<script>
window.onerror = function(msg, url, line, col, error) {
  document.getElementById('error').textContent = 'Error: ' + msg + ' (Line ' + line + ')';
};
</script>
</body>
</html>
